{% extends "MainPage.html" %}

{% block content %}

<section class="container py-5">

    <div class="row justify-content-center mb-4">
        <div class="col-lg-8 text-center">
            <h2 class="fw-bold" style="color:#166534;">
                Coin statistics
            </h2>
            <p class="text-muted mb-0">
                View latest daily high, low, close, volume and market cap
                for any cryptocurrency stored in your database.
            </p>
        </div>
    </div>

    <!-- избор на coin -->
    <div class="row justify-content-center mb-4">
        <div class="col-lg-6">
            <form method="get" action="{{ url_for('stats_overview') }}">
                <label class="form-label fw-semibold" style="color:#166534;">
                    Choose a coin:
                </label>
                <select name="symbol" class="form-select" required>
                    <option value="" disabled {% if not selected_symbol %}selected{% endif %}>
                        Select symbol...
                    </option>
                    {% for sym in all_symbols %}
                        <option value="{{ sym }}"
                                {% if selected_symbol == sym %}selected{% endif %}>
                            {{ sym }}
                        </option>
                    {% endfor %}
                </select>

                <button type="submit"
                        class="btn mt-3 fw-semibold"
                        style="background-color:#16a34a; border:none; color:white;">
                    Show statistics
                </button>
            </form>
        </div>
    </div>

    <!-- прикажување на статистики -->
    {% if stats %}
    <div class="row justify-content-center">
        <div class="col-lg-6">
            <div class="card border-0 shadow-sm" style="border-radius:1.25rem;">
                <div class="card-body" style="background-color:#ecfdf5;">
                    <h5 class="card-title fw-bold mb-3" style="color:#166534;">
                        {{ stats.symbol }} – statistics for {{ stats.date }}
                    </h5>

                    <ul class="list-group list-group-flush">
                        <li class="list-group-item d-flex justify-content-between">
                            <span>High:</span>
                            <span>{{ stats.high }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Low:</span>
                            <span>{{ stats.low }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Close:</span>
                            <span>{{ stats.close }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Volume:</span>
                            <span>{{ stats.volume }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Market cap:</span>
                            <span>{{ stats.market_cap }}</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    {% elif selected_symbol %}
    <div class="row justify-content-center">
        <div class="col-lg-6 text-center text-muted">
            No statistics found for {{ selected_symbol }}.
        </div>
    </div>
    {% endif %}

</section>

{% endblock %}
